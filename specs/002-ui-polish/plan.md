# Implementation Plan: UX/UI Polish Improvements

**Branch**: `002-ui-polish` | **Date**: 2025-11-07 | **Spec**: [spec.md](./spec.md)
**Input**: Feature specification from `/specs/002-ui-polish/spec.md`

## Summary

Implement comprehensive UX/UI polish improvements to transform the Waldo Health app from functional to world-class, addressing professional icon usage, search/filter functionality, loading states, form improvements, accessibility enhancements, and visual consistency. This is a frontend-only enhancement requiring no backend changes.

**Primary Technical Approach**: Replace emoji icons with @expo/vector-icons, implement React hooks for filter/search state management, add skeleton loading components, enhance form validation with inline errors, integrate expo-haptics for tactile feedback, and standardize theme usage across all screens.

## Technical Context

**Language/Version**: TypeScript 5.x with React Native via Expo SDK (latest stable)
**Primary Dependencies**:
- @expo/vector-icons (already included in Expo)
- expo-haptics (requires installation)
- React Native core components
- Existing Convex React hooks

**Storage**: AsyncStorage (for draft form auto-save)
**Testing**: Jest + React Native Testing Library + Detox (E2E)
**Target Platform**: iOS 15+ and Android 10+ (React Native mobile app)
**Project Type**: Mobile (React Native/Expo) - existing codebase enhancement
**Performance Goals**:
- Skeleton screens appear <300ms
- Search filters in real-time (<100ms latency)
- Icon rendering consistent 60fps
- Touch interactions responsive <16ms

**Constraints**:
- No backend API changes allowed
- Must maintain WCAG 2.1 AA compliance
- Cannot break existing functionality
- Must work offline (existing offline-first architecture)

**Scale/Scope**:
- ~8 screens to update
- ~15 components to enhance
- ~30 icon replacements
- ~50 accessibility labels to add

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

### Pre-Design Check

| Principle | Status | Notes |
|-----------|--------|-------|
| **I. Code Quality First** | ✅ PASS | TypeScript already enforced, will maintain type safety throughout |
| **II. Test-Driven Development** | ✅ PASS | Will write unit tests for new components (search, filters), integration tests for form validation, E2E tests for critical user flows |
| **III. UX Consistency** | ✅ PASS | Primary goal of this feature - standardizing icons, improving accessibility, consistent loading states |
| **IV. Performance Standards** | ✅ PASS | Skeleton screens target <300ms, search/filter optimized for real-time (<100ms), no new API calls introduced |
| **V. Observability** | ✅ PASS | Will add analytics events for filter usage, search queries, and form completion tracking |

**Quality Gates Applicable**:
- Gate 2: Code Review (peer review for UI changes)
- Gate 3: Automated Tests (unit + integration + E2E)
- Gate 4: Performance Audit (Lighthouse/React Native Performance Monitor)
- Gate 6: Accessibility Audit (screen reader testing, contrast verification)
- Gate 7: Staging Validation (manual QA on real devices)

**Decision**: ✅ ALL GATES PASSED - Proceed to Phase 0

## Project Structure

### Documentation (this feature)

```text
specs/002-ui-polish/
├── plan.md              # This file
├── research.md          # Phase 0 - Best practices for React Native UI patterns
├── data-model.md        # Phase 1 - Filter/search state models
├── quickstart.md        # Phase 1 - Developer guide for using new components
├── contracts/           # Phase 1 - Component prop interfaces
└── tasks.md             # Phase 2 - Generated by /speckit.tasks
```

### Source Code (repository root)

```text
src/
├── components/
│   ├── common/
│   │   ├── Button.tsx              # [ENHANCE] Add size variants, loading state
│   │   ├── Card.tsx                # [ENHANCE] Add skeleton variant
│   │   ├── LoadingSpinner.tsx      # [ENHANCE] Replace with skeleton screens
│   │   ├── SkeletonCard.tsx        # [NEW] Skeleton placeholder component
│   │   ├── SkeletonList.tsx        # [NEW] List skeleton component
│   │   └── EmptyState.tsx          # [NEW] Empty state component
│   ├── exposure/
│   │   ├── ExposureCard.tsx        # [ENHANCE] Replace emoji icons, add tap handler
│   │   ├── ExposureTypeSelector.tsx # [ENHANCE] Replace emoji with vector icons
│   │   ├── FilterBar.tsx           # [NEW] Filter UI component
│   │   └── SearchBar.tsx           # [NEW] Search input component
│   └── forms/
│       ├── FormProgress.tsx        # [NEW] Multi-step progress indicator
│       ├── InlineError.tsx         # [NEW] Inline validation error display
│       └── DraftSaver.tsx          # [NEW] Auto-save draft hook/component
│
├── hooks/
│   ├── useFilter.ts                # [NEW] Filter state management
│   ├── useSearch.ts                # [NEW] Search functionality
│   ├── useHaptics.ts               # [NEW] Haptic feedback wrapper
│   └── useDraftForm.ts             # [NEW] Auto-save form drafts
│
├── constants/
│   ├── theme.ts                    # [ENHANCE] Add semantic color tokens
│   └── icons.ts                    # [NEW] Icon mapping for exposure types
│
└── app/(tabs)/
    ├── _layout.tsx                 # [ENHANCE] Replace emoji tab icons
    ├── index.tsx                   # [ENHANCE] Replace emoji, add stats
    ├── list.tsx                    # [ENHANCE] Add filter/search, tap handlers
    ├── new.tsx                     # [ENHANCE] Form progress, inline validation
    ├── export.tsx                  # [ENHANCE] Progress indicators
    ├── education.tsx               # [ENHANCE] Search UI improvements
    └── profile.tsx                 # [ENHANCE] Settings organization

__tests__/
├── unit/
│   ├── hooks/
│   │   ├── useFilter.test.ts       # [NEW] Filter logic tests
│   │   ├── useSearch.test.ts       # [NEW] Search logic tests
│   │   └── useDraftForm.test.ts    # [NEW] Auto-save tests
│   └── components/
│       ├── FilterBar.test.tsx      # [NEW] Filter UI tests
│       ├── SearchBar.test.tsx      # [NEW] Search UI tests
│       └── EmptyState.test.tsx     # [NEW] Empty state tests
│
├── integration/
│   ├── filter-search.test.ts       # [NEW] Combined filter+search flows
│   ├── form-validation.test.ts     # [NEW] Inline validation flows
│   └── accessibility.test.ts       # [NEW] Screen reader + touch target tests
│
└── e2e/
    ├── list-navigation.e2e.ts      # [NEW] Detox test for filter/search
    └── form-completion.e2e.ts      # [NEW] Detox test for multi-step forms
```

**Structure Decision**: This is a mobile app enhancement. All changes are within the existing `src/` structure. New components follow the established pattern (`components/common/`, `components/exposure/`), new hooks go in `hooks/`, and screen enhancements modify existing files in `app/(tabs)/`.

## Complexity Tracking

> **No constitution violations - this section not applicable**

All constitution principles are satisfied. This is a pure UI enhancement that maintains existing architecture patterns.
